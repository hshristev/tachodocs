<script>
  document.getElementById('doc-search').addEventListener('input', function(e) {
    const term = e.target.value.trim().toLowerCase();

    document.querySelectorAll('.doc-card').forEach(card => {
      // Lowercase the keywords attribute for case-insensitive matching
      const kws  = (card.getAttribute('data-keywords') || '').toLowerCase();
      const text = card.textContent.toLowerCase();

      card.style.display =
        term === '' || kws.includes(term) || text.includes(term)
          ? ''
          : 'none';
    });

    // Hide any section that has no visible cards
    document.querySelectorAll('main section').forEach(section => {
      const cards = section.querySelectorAll('.doc-card');
      const anyVisible = Array.from(cards).some(
        card => card.style.display !== 'none'
      );
      section.style.display = anyVisible ? '' : 'none';
    });
  });
</script>
